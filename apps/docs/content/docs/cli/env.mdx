---
title: morpheus env
description: Manage environment variables and secrets
---

# morpheus env

Manage environment variables for your deployment. Secrets are automatically encrypted using ECIES.

## Usage

```bash
morpheus env <command> [options]
```

## Commands

| Command  | Description                        |
| -------- | ---------------------------------- |
| `set`    | Set an environment variable        |
| `get`    | Get an environment variable value  |
| `list`   | List all environment variables     |
| `delete` | Delete an environment variable     |
| `sync`   | Sync changes to running deployment |

## morpheus env set

Set an environment variable:

```bash
morpheus env set <KEY> <value>
```

### Examples

Set a plain text variable:

```bash
morpheus env set NODE_ENV production
```

Set a secret (automatically encrypted):

```bash
morpheus env set ANTHROPIC_API_KEY sk-ant-xxxxx
```

The secret is stored encrypted in `morpheus.yaml`:

```yaml
env:
  NODE_ENV: production
  ANTHROPIC_API_KEY: sealed:v1:aGVsbG8gd29ybGQ...
```

### Options

| Option     | Description                                                    |
| ---------- | -------------------------------------------------------------- |
| `--plain`  | Store as plain text (not recommended for secrets)              |
| `--sealed` | Force encryption (default for values matching secret patterns) |

## morpheus env get

Retrieve an environment variable:

```bash
morpheus env get ANTHROPIC_API_KEY

ANTHROPIC_API_KEY=sk-ant-xxxxx (sealed)
```

### Options

| Option      | Description                            |
| ----------- | -------------------------------------- |
| `--decrypt` | Show decrypted value (requires wallet) |
| `--raw`     | Output only the value (for scripting)  |

## morpheus env list

List all environment variables:

```bash
morpheus env list

KEY                  TYPE      VALUE
NODE_ENV             plain     production
DATABASE_URL         sealed    sealed:v1:abc...
ANTHROPIC_API_KEY    sealed    sealed:v1:def...
LOG_LEVEL            plain     info
```

### Options

| Option          | Description           |
| --------------- | --------------------- |
| `--show-values` | Show decrypted values |
| `--json`        | Output as JSON        |

## morpheus env delete

Delete an environment variable:

```bash
morpheus env delete LOG_LEVEL

Deleted LOG_LEVEL
```

## morpheus env sync

Apply environment changes to a running deployment:

```bash
morpheus env sync

Syncing environment to deployment 12345678...
  ✓ Added: API_VERSION
  ✓ Updated: LOG_LEVEL
  ✓ Removed: DEBUG

Restarting services...
  ✓ agent restarted
  ✓ Deployment healthy
```

## Secret Detection

Morpheus automatically detects and encrypts values that look like secrets:

| Pattern            | Examples                    |
| ------------------ | --------------------------- |
| API keys           | `sk-`, `api_`, `key_`       |
| Tokens             | `token_`, `bearer_`         |
| Passwords          | `password`, `secret`        |
| Connection strings | `postgres://`, `mongodb://` |

To force plain text storage:

```bash
morpheus env set MY_KEY my-api-key --plain
```

## Importing from .env

Import from a `.env` file:

```bash
morpheus env import .env

Imported 5 variables:
  NODE_ENV (plain)
  DATABASE_URL (sealed)
  ANTHROPIC_API_KEY (sealed)
  LOG_LEVEL (plain)
  PORT (plain)
```

## Exporting

Export to a file:

```bash
# Encrypted format
morpheus env export > .env.encrypted

# Decrypted (requires wallet)
morpheus env export --decrypt > .env.local
```

## In morpheus.yaml

Environment variables are stored in your config:

```yaml
env:
  # Plain text values
  NODE_ENV: production
  LOG_LEVEL: info
  PORT: '3000'

  # Sealed secrets (encrypted)
  DATABASE_URL: sealed:v1:aGVsbG8gd29ybGQ=...
  ANTHROPIC_API_KEY: sealed:v1:dGVzdCBzZWNyZXQ=...
```

## Security Notes

- Sealed secrets can only be decrypted by your wallet's private key
- Never commit decrypted secrets to version control
- Use `.gitignore` to exclude `.env*` files
- Sealed values are safe to commit (encrypted)
